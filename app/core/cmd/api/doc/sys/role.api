syntax = "v1"

info(
	title: "角色"
	desc: "角色"
	author: "Trevor"
	email: "trevorlan@163.com"
)

type (
	Role {
		Id          int64   `json:"id"`
		ParentId    int64   `json:"parentId"`
		Name        string  `json:"name"`
		UniqueKey   string  `json:"uniqueKey"`
		PermMenuIds []int64 `json:"permMenuIds"`
		Remark      string  `json:"remark"`
		Status      int64   `json:"status"`
		OrderNum    int64   `json:"orderNum"`
	}
	SysRoleListResp {
		RoleList []Role `json:"list"`
	}
)

type (
	AddSysRoleReq {
		ParentId    int64   `json:"parentId"`
		Name        string  `json:"name"`
		UniqueKey   string  `json:"uniqueKey"`
		PermMenuIds []int64 `json:"permMenuIds"`
		Remark      string  `json:"remark"`
		Status      int64   `json:"status"`
		OrderNum    int64   `json:"orderNum"`
	}
)

type (
	DeleteSysRoleReq {
		Id int64 `json:"id"`
	}
)

type (
	UpdateSysRoleReq {
		Id          int64   `json:"id"`
		ParentId    int64   `json:"parentId"`
		Name        string  `json:"name"`
		UniqueKey   string  `json:"uniqueKey"`
		PermMenuIds []int64 `json:"permMenuIds"`
		Remark      string  `json:"remark"`
		Status      int64   `json:"status"`
		OrderNum    int64   `json:"orderNum"`
	}
)

type (
	UpdateSysRolePermMenuReq {
		Id          int64   `json:"id"`
		PermMenuIds []int64 `json:"permMenuIds"`
	}
)

@server(
	jwt: JwtAuth
	group : sys/role
	prefix : /sys/role
	middleware: PermMenuAuth
)
service core-api {
	@doc(
		summary: "角色列表"
	)
	@handler GetSysRoleList
	get /list returns (SysRoleListResp)
	
	@doc(
		summary: "新增角色"
	)
	@handler AddSysRole
	post /add (AddSysRoleReq)
	
	@doc(
		summary: "删除角色"
	)
	@handler DeleteSysRole
	post /delete (DeleteSysRoleReq)
	
	@doc(
		summary: "更新角色"
	)
	@handler UpdateSysRole
	post /update (UpdateSysRoleReq)
	
	@doc(
		summary: "更新角色权限"
	)
	@handler UpdateSysRolePermMenu
	post /perm/update (UpdateSysRolePermMenuReq)
}