syntax = "v1"

info(
	title: "字典"
	desc: "字典"
	author: "Trevor"
	email: "trevorlan@163.com"
)

type (
	ConfigDict {
		Id        uint64 `json:"id"`
		ParentId  uint64 `json:"parentId"`
		Name      string `json:"name"`
		Type      uint64 `json:"type"`
		UniqueKey string `json:"uniqueKey"`
		Value     string `json:"value"`
		OrderNum  uint64 `json:"orderNum"`
		Remark    string `json:"remark"`
		Status    uint64 `json:"status"`
	}
	ConfigDictListResp {
		DictList []ConfigDict `json:"list"`
	}
)

type (
	ConfigDictPageReq {
		Page     uint64 `form:"page"      validate:"number,gte=1"`
		Limit    uint64 `form:"limit"     validate:"number,gte=1"`
		ParentId uint64 `form:"parentId"  validate:"number,gte=0"`
	}
	ConfigDictPagination {
		Page  uint64 `json:"page"`
		Limit uint64 `json:"limit"`
		Total uint64 `json:"total"`
	}
	ConfigDictPageResp {
		ConfigDictList []ConfigDict         `json:"list"`
		Pagination     ConfigDictPagination `json:"pagination"`
	}
)

type (
	AddConfigDictReq {
		ParentId  uint64 `json:"parentId"   validate:"number,gte=0"`
		Name      string `json:"name"       validate:"min=2,max=50"`
		Type      uint64 `json:"type"       validate:"number,gte=1,lte=12"`
		UniqueKey string `json:"uniqueKey"  validate:"min=2,max=50"`
		Value     string `json:"value"      validate:"max=2048"`
		OrderNum  uint64 `json:"orderNum"   validate:"gte=0,lte=9999"`
		Remark    string `json:"remark"     validate:"max=200"`
		Status    uint64 `json:"status"     validate:"number,gte=0,lte=1"`
	}
)

type (
	DeleteConfigDictReq {
		Id uint64 `json:"id"  validate:"number,gte=1"`
	}
)

type (
	UpdateConfigDictReq {
		Id        uint64 `json:"id"        validate:"number,gte=1"`
		ParentId  uint64 `json:"parentId"  validate:"number,gte=0"`
		Name      string `json:"name"      validate:"min=2,max=50"`
		Type      uint64 `json:"type"      validate:"number,gte=1,lte=12"`
		Value     string `json:"value"     validate:"max=2048"`
		OrderNum  uint64 `json:"orderNum"  validate:"gte=0,lte=9999"`
		Remark    string `json:"remark"    validate:"max=200"`
		Status    uint64 `json:"status"    validate:"number,gte=0,lte=1"`
	}
)

@server(
	jwt: JwtAuth
	group : config/dict
	prefix : /config/dict
	middleware: PermMenuAuth
)
service core-api {
	@doc(
		summary: "字典列表"
	)
	@handler GetConfigDictList
	get /list returns (ConfigDictListResp)
	
	@doc(
		summary: "分页字典数据"
	)
	@handler GetConfigDictPage
	get /data/page (ConfigDictPageReq) returns (ConfigDictPageResp)
	
	@doc(
		summary: "新增字典"
	)
	@handler AddConfigDict
	post /add (AddConfigDictReq)
	
	@doc(
		summary: "删除字典"
	)
	@handler DeleteConfigDict
	post /delete (DeleteConfigDictReq)
	
	@doc(
		summary: "更新字典"
	)
	@handler UpdateConfigDict
	post /update (UpdateConfigDictReq)
}